#pragma once

#include "mbed.h"

namespace fsdaq {


static const int COLS = @COLS@;

static const char *col_names[] = { "Time_ms", @COL_NAMES@ };
static const uint8_t col_name_sizes[] = { 7, @COL_NAME_SIZES@ };
static const char *col_name_types[] = { "u5", @COL_NAME_TYPES@ };

struct DataRow {
    uint32_t Time_ms;

@DATA_ROW_STRUCT_FIELDS@
};

#pragma pack(1)
template<int Rows>
class DataBatch {
    uint32_t Time_ms[Rows];

@DATA_BATCH_STRUCT_FIELDS@

public:
    void set_row(DataRow row, int idx, uint32_t current_time_ms) {
        this->Time_ms[idx] = current_time_ms;

@UPDATE_FIELDS_FROM_ROW@
    }
};
#pragma pack()


    
} // namespace fsdaq
